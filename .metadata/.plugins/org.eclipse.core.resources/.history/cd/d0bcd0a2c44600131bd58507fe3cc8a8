package chaosPoems;

import java.util.ArrayList;
import java.util.Iterator;

public class ResultCleaner {

	private String[] dirt;
	private String[] linesToBeKilled;

	public ResultCleaner() {

		// Array with strings to be removed
		dirt = new String[3];
		dirt[0] = "<span class='searchmatch'>";
		dirt[1] = "</span>";
		dirt[2] = "\"";

		// The lines which contains following strings will be deleted
		linesToBeKilled = new String[1];
		linesToBeKilled[0] = "Sindice search:";

	}

	public ArrayList<String> clean(ArrayList<String> dirtyresults, String keywords) {

		ArrayList<String> res = new ArrayList<String>();

		for (String s : dirtyresults) {

			res.add(removeStrings(s)); // Removed unwanted caracters
		}

		Iterator<String> itr = res.iterator();
		while (itr.hasNext()) {
			String s = (String) itr.next();

			if (shouldLineBeKilled(s)) {
				itr.remove();
			}

		}

		return res;
	}

	private String removeStrings(String dirtystring) {

		for (int i = 0; i < dirt.length; i++) {

			dirtystring = vacuum(dirtystring, dirt[i]);

		}

		return dirtystring;

	}

	private String vacuum(String dirtystring, String unwantedstring) {

		return dirtystring.replaceAll(unwantedstring, "");

	}

	/**
	 * 
	 * @param containingline
	 * @return true if the lines contains strings from the linesTobeKilled list
	 */
	private Boolean shouldLineBeKilled(String containingline) {
		Boolean res = false;

		for (String s : linesToBeKilled) {
			if (containingline.toLowerCase().contains(s.toLowerCase())) {
				res = true;
			}
		}

		return res;

	}

}
